server.port=8080
spring.application.name=funaistudioapi

spring.datasource.url=jdbc:mysql://localhost:3306/db_funaistudio?useSSL=false&serverTimezone=UTC
spring.datasource.username=root
spring.datasource.password=Ss123456!
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL8Dialect
spring.mvc.pathmatch.matching-strategy=ANT_PATH_MATCHER

# Swagger UI ??
# Spring Boot 3 + springdoc 2.x ????? /swagger-ui/index.html
springdoc.swagger-ui.path=/swagger-ui
springdoc.api-docs.path=/v3/api-docs
springdoc.swagger-ui.operationsSorter=method
# ?? Swagger UI
springdoc.swagger-ui.enabled=true
# ??????????
spring.web.resources.add-mappings=true
# ?? springdoc ????
springdoc.api-docs.enabled=true

# MyBatis-Plus ??
mybatis-plus.configuration.map-underscore-to-camel-case=true
mybatis-plus.global-config.db-config.id-type=auto

jwt.secret=funaistudio
#10?? ??24*7 168??36000*16.8
jwt.expiration=604800
# FunAI ????????????? appInfo ?? accessUrl?
funai.siteBaseUrl=172.21.138.87/
#?????
funai.siteLinkEnabled=true
funai.siteLinkRoot=/data/funai/sites

# -----------------------------
# Workspace（双机模式：API 服务器裁剪）
# - API 服务器（小机）保留 controller 用于 Swagger 展示
# - /api/fun-ai/workspace/** 的实际执行由 workspace-node 负责（API 服务器（小机）仅转发/签名）
# -----------------------------
funai.workspace.enabled=false
# -----------------------------
# API 服务器（小机）-> Workspace 开发服务器（大机）workspace-node 应用层代理（双机模式）
# - API 服务器（小机）对外仍暴露 /api/fun-ai/workspace/**（Swagger 可见）
# - 实际由 API 服务器（小机）转发到 Workspace 开发服务器（大机）workspace-node，并附带 X-WS-* 签名头
# -----------------------------
workspace-node-proxy.enabled=true
workspace-node-proxy.base-url=http://172.21.138.91:7001
# 与 Workspace 开发服务器（大机）workspace-node.internal.shared-secret 保持一致
workspace-node-proxy.shared-secret=ac462cfa76135504d2b750d541064ed5f03eb9f78f9068645995c4f825455f52
workspace-node-proxy.connect-timeout-ms=2000
# 0 表示不设置（SSE/下载更友好）
workspace-node-proxy.read-timeout-ms=0
# 计算签名需要 body sha256：超过阈值会落盘临时文件避免 OOM
workspace-node-proxy.body-spool-threshold-bytes=2097152
#build.buildedPath=D:\\dev\\h5\\code\\talos\\dist\\
spring.ai.dashscope.api-key=sk-8e78660ba8034d528093e4fd7839f7df
#?????????
spring.ai.alibaba.bialian.enable=true
spring.ai.alibaba.bialian.index-name="saa-playground-2"

# ????
logging.level.root=INFO
# -----------------------------
# 日志落盘（API 服务）
# -----------------------------
logging.file.name=/data/funai/logs/fun-ai-studio-api/app.log

# 按天滚动（每天一个文件，gzip 压缩）
logging.logback.rollingpolicy.file-name-pattern=/data/funai/logs/fun-ai-studio-api/app.%d{yyyy-MM-dd}.log.gz

# 保留最近 30 天
logging.logback.rollingpolicy.max-history=30

# 总日志大小上限（超过会清理旧日志）
logging.logback.rollingpolicy.total-size-cap=5GB

# 启动时清理超期日志
logging.logback.rollingpolicy.clean-history-on-start=true
